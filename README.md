# üéìü§ñ ACBot

O projeto **ACBot** √© um chatbot educacional desenvolvido utilizando o **Amazon Lex** e outras tecnologias da AWS para fornecer informa√ß√µes sobre processos academicos do Instituto Federal de Educa√ß√£o, Ci√™ncia e Tecnologia da Para√≠ba.

## üìñ √çndice

- [üîé Sobre o Chatbot](#-sobre-o-chatbot)
  - [Descri√ß√£o do projeto](#descri√ß√£o-do-projeto)
  - [Justificativa](#justificativa)
  - [Principais funcionalidades](#Ô∏è-principais-funcionalidades)
- [üèõÔ∏è Arquitetura](#Ô∏è-arquitetura)
- [‚öôÔ∏è Tecnologias Utilizadas](#Ô∏è-tecnologias-utilizadas)
- [üöÄ Execu√ß√£o e Utiliza√ß√£o](#-execu√ß√£o-e-utiliza√ß√£o)
  - [Pr√©-requisitos](#pr√©-requisitos)
  - [Passos de inicializa√ß√£o](#passos-de-inicializa√ß√£o)
  - [Passos para executar as fun√ß√µes com o Serverless no API Gateway e Lambda](#passos-para-executar-as-fun√ß√µes-com-o-serverless-no-api-gateway-e-lambda)
  - [Passos para executar o chatbot no Lex e o backend no Lambda](#passos-para-executar-o-chatbot-no-lex-e-o-backend-no-lambda)
- [üß± Estrutura do Projeto](#-estrutura-do-projeto)
- [üöß Desafios e Solu√ß√µes](#-desafios-e-solu√ß√µes)
- [üåê Acesso ao Chatbot](#-acesso-ao-chatbot)
- [üë• Contribuidores](#-contribuidores)


## üîé Sobre o Chatbot

### Descri√ß√£o do projeto
O projeto consiste em um bot de assist√™ncia para processos acad√™micos, desenvolvido para alunos do IFPB, com o objetivo de facilitar informa√ß√µes e fun√ß√µes para os alunos e servidores que abrem requerimentos de processos acad√™micos. Ele proporciona orienta√ß√£o sobre procedimentos, passo a passo e an√°lise de documentos, utilizando tecnologias avan√ßadas de intelig√™ncia artificial para oferecer um suporte eficiente, pr√°tico e amig√°vel.

### Justificativa
A justificativa e import√¢ncia deste projeto reside na simplifica√ß√£o em facilitar a vida de todos que fazem parte da institui√ß√£o e lidam com processos acad√™micos, melhorando a efici√™ncia e a experi√™ncia do usu√°rio. O bot visa reduzir as dificuldades tanto para os alunos quanto para o corpo administrativo com a utiliza√ß√£o de tecnologias como reconhecimento de imagem e IA generativa, o bot pode oferecer respostas mais personalizadas e seguras, garantindo que todas as etapas sejam executadas corretamente.

### Principais Funcionalidades
- **Consulta e listagem de processos acad√™micos:** Integra√ß√£o com DynamoDB para armazenar e consultar tipos de processos acad√™micos.
- **Valida√ß√£o de legibilidade de imagens:** Utiliza o Amazon Rekognition para valida√ß√£o de documentos.
- **Convers√£o de texto para √°udio:** Com o Amazon Polly, o bot gera √°udio a partir de respostas textuais.
- **Gera√ß√£o de conte√∫do com IA Generativa:** Com o amazon Bedrock, o bot recebe os passos sobre determinada tarefa e auxilar em quest√µes do usu√°rio.

## üèõÔ∏è Arquitetura

### Vis√£o Geral

O sistema √© composto pelos seguintes componentes principais:

- **React:** Tecnologia utilizada no sistema, onde os alunos interagem com o bot por meio de uma interface web moderna, responsiva e intuitiva.
- **Nextjs:** Frontend do sistema, que faz liga√ß√µes entre todos os componentes e requisi√ß√µes do sistema para entregar uma pr√©vea do sistema.
- **Axios:** Utilizado para fazer chamadas HTTP no frontend, facilitando a comunica√ß√£o com as APIs do backend.
- **AWS Amplify:** Facilita a integra√ß√£o do frontend com os servi√ßos AWS, simplificando a autentica√ß√£o, o armazenamento e a intera√ß√£o com as APIs do sistema.
- **Amazon Cognito:** Gerencia a autentica√ß√£o e autoriza√ß√£o dos usu√°rios (alunos), garantindo que somente usu√°rios autenticados tenham acesso a determinadas funcionalidades.
- **Amazon Lex:** Gerencia as intera√ß√µes e a compreens√£o de texto, oferecendo um chatbot inteligente.
- **Amazon Polly:** Converte texto em fala, facilitando o acesso para alunos com defici√™ncia visual ou prefer√™ncias auditivas.
- **Amazon S3:** Armazena com seguran√ßa documentos enviados pelos alunos, como documentos pessoais.
- **AWS Lambda:** Gerencia a l√≥gica do bot, integrando diferentes servi√ßos e processos.
- **Amazon Rekognition:** Analisa e verifica os documentos enviados.
- **Amazon Bedrock:** Fornece respostas avan√ßadas e personalizadas utilizando IA generativa.
- **Amazon DynamoDB:** Armazena dados estruturados relacionados aos processos acad√™micos e intera√ß√µes do bot.

### Detalhamento dos Componentes

- **Frontend (Nextjs + React):** A interface de usu√°rio (UI) foi constru√≠da usando o **Nextjs** que tem como principal tecnologia o **React**, que oferece uma experi√™ncia interativa e moderna.
 
- **AWS Amplify** Foi utilizado para facilitar a integra√ß√£o do frontend com os servi√ßos da AWS, especialmente para a autentica√ß√£o com o (Cognito) e utiliza√ß√£o dos recursos autenticados em chamadas de API (Axios) e utiliza√ß√£o dos servi√ßos como S3 e Lex.
  
- **Axios** foi usado para realizar requisi√ß√µes HTTP entre o frontend e o backend (AWS Lambda), manipulando respostas e erros de forma eficiente.
  
- **Autentica√ß√£o e autoriza√ß√£o (Cognito):** **Amazon Cognito** gerencia o controle de usu√°rios e permiss√µes. Ele autentica os usu√°rios e gera tokens de autoriza√ß√£o para garantir o acesso seguro √†s APIs e dados.

- **Backend (AWS Lambda):** **Lambda** gerencia toda a l√≥gica do bot, integrando-se com servi√ßos como Amazon Lex, Rekognition, Bedrock e Polly. Ele tamb√©m coordena as chamadas de outros servi√ßos AWS, como o armazenamento de dados no DynamoDB e o armazenamento de documentos no S3.

- **Armazenamento (S3):** **Amazon S3** √© utilizado para armazenar documentos enviados pelos alunos.

- **Chatbot (Lex):** O **Amazon Lex** gerencia a compreens√£o e processamento de linguagem natural, permitindo que o bot responda a perguntas textuais. O 

- **IA Generativa (Amazon Bedrock)** Complementa as respostas do **Lex**, gerando conte√∫dos relevantes e personalizadas para responder quest√µes dos usu√°rios.

- **Reconhecimento de imagens (Rekognition):** O **Amazon Rekognition** √© utilizado para an√°lise de imagens, como fotos de documentos, verificando legibilidade e autenticidade.

- **Armazenamento de dados (DynamoDB):** **Amazon DynamoDB** armazena dados estruturados sobre os processos acad√™micos e intera√ß√µes dos alunos com o sistema.

### Fluxo de Intera√ß√£o

1. O aluno acessa a aplica√ß√£o, faz login ou cria uma conta e acessa o sistema.
2. Ap√≥s autenticado, o aluno interage com o bot, enviando perguntas, documentos ou mensagens de voz. O **Amazon Lex** processa as intera√ß√µes textuais e de voz e, se necess√°rio, chama o **AWS Lambda** para processar a l√≥gica exigida.
3. Se o aluno enviar um documento, o **Amazon Rekognition** √© chamado para verificar a autenticidade e a legibilidade do arquivo.
4. O bot pode utilizar o **Amazon Polly** para converter respostas textuais em √°udio, facilitando a intera√ß√£o para alunos com necessidades especiais.
5. Os dados e documentos dos alunos s√£o armazenados de forma segura no **Amazon S3** e **Amazon DynamoDB**.
6. O frontend se comunica com o backend utilizando **Axios**, enviando dados e recebendo respostas.
7. **AWS Amplify** facilita a conex√£o entre o frontend e os servi√ßos AWS, como o Cognito, o Lex, o S3 e as APIs de backend.

### Diagrama de arquitetura

![arquitetura-sistema](./assets/images/ACBot-architecture.png)

## ‚öôÔ∏è Tecnologias Utilizadas

1. **[Lex](https://aws.amazon.com/lex/)** - *Interface de conversa do bot, que permite intera√ß√µes naturais com os usu√°rios.*
2. **[Polly](https://aws.amazon.com/polly/)** - *Convers√£o de texto para fala, proporcionando uma experi√™ncia de voz ao usu√°rio.*
3. **[Lambda](https://aws.amazon.com/lambda)** - *Backend do chatbot e integra√ß√£o dos servi√ßos, permitindo execu√ß√£o de c√≥digo em resposta a eventos.*
4. **[DynamoDB](https://aws.amazon.com/dynamodb/)** - *Banco de dados NoSQL para armazenar dados do chatbot, garantindo alta escalabilidade e desempenho.*
5. **[API Gateway](https://aws.amazon.com/api-gateway)** - *Exposi√ß√£o de fun√ß√µes Lambda via endpoints API, facilitando a comunica√ß√£o entre o frontend e o backend.*
6. **[Cognito](https://aws.amazon.com/cognito/)** - *Servi√ßo de autentica√ß√£o e controle de acesso, assegurando que apenas usu√°rios autorizados possam interagir com o bot.*
7. **[Serverless Framework](https://www.serverless.com/)** - *Facilita a constru√ß√£o e implementa√ß√£o de aplica√ß√µes serverless, simplificando a gest√£o de recursos na nuvem.*
8. **[Nextjs](https://nextjs.org)** - *Biblioteca JavaScript para construir frontends/backends baseados em ReactJs.*
8. **[React](https://reactjs.org)** - *Biblioteca JavaScript para construir interfaces de usu√°rio, proporcionando uma experi√™ncia interativa e responsiva.*
9. **[Axios](https://axios-http.com/)** - *Biblioteca para realizar requisi√ß√µes HTTP, facilitando a comunica√ß√£o com APIs externas.*
10. **[S3](https://aws.amazon.com/s3)** - *Armazenamento de arquivos de √°udio e logs, oferecendo uma solu√ß√£o escal√°vel para armazenar dados.*
11. **[Rekognition](https://aws.amazon.com/rekognition/)** - *Servi√ßo de an√°lise de imagem e v√≠deo, que pode ser utilizado para melhorar a intera√ß√£o do bot.*
12. **[Bedrock](https://aws.amazon.com/bedrock/)** - *Plataforma de modelos generativos de IA, proporcionando recursos avan√ßados de intelig√™ncia artificial.*
13. **[Amplify](https://aws.amazon.com/amplify/)** - *Plataforma para desenvolvimento e hospedagem de aplicativos web e mobile, facilitando o gerenciamento de recursos AWS.*
14. **[Git](https://git-scm.com)** - *Controle de vers√£o do projeto, garantindo rastreamento e gerenciamento de altera√ß√µes.*
15. **[Trello](https://trello.com)** - *Gerenciamento das tarefas do projeto, organizando o fluxo de trabalho da equipe.*
16. **[AWS CLI](https://aws.amazon.com/cli/)** - *Interface de linha de comando para gerenciar servi√ßos AWS, facilitando a automa√ß√£o de tarefas.*

## ü§ñ Intents do Chatbot

### 1. **WelcomeIntent**
   - **Descri√ß√£o:** Sauda√ß√£o inicial e orienta√ß√µes ao usu√°rio sobre como o bot pode ajudar.
   - **Exemplos de frases:**
     - "Ol√°"
     - "Oi"
     - "Quais informa√ß√µes posso obter?"

### 2. **ProcessOpeningGuideIntent**
   - **Descri√ß√£o:** Fornece orienta√ß√£o sobre como abrir um processo.
   - **Exemplos de frases:**
     - "Como posso abrir um processo acad√™mico?"
     - "Quais s√£o os passos para iniciar um processo de revis√£o de nota?"

### 3. **ListAllProcessTypesIntent**
   - **Descri√ß√£o:** Lista todos os tipos de processos acad√™micos dispon√≠veis no IFPB, fornecendo uma vis√£o geral de cada um.
   - **Exemplos de frases:**
     - "Quais s√£o os tipos de processos acad√™micos dispon√≠veis?"
     - "Quais s√£o os processos acad√™micos que a institui√ß√£o oferece?"

### 4. **CheckProcessTypesIntent**
   - **Descri√ß√£o:** Consulta um processo acad√™mico espec√≠fico.
   - **Exemplos de frases:**
     - "Quero consultar um processo acad√™mico."
     - "Quero informa√ß√µes detalhadas sobre um processo acad√™mico."

### 5. **ProcessOutcomeIntent**
   - **Descri√ß√£o:** Efetua consultas sobre os efeitos resultantes dos requerimentos de processos abertos anteriormente e responde perguntas especificas sobre as informa√ß√µes fornecidas.
   - **Exemplos de frases:**
     - "Como saber a situa√ß√£o do meu processo?"
     - "Como verificar se meu requerimento foi aceito?"

### 6. **CheckDocumentLegibilityIntent**
   - **Descri√ß√£o:** Verifica a legibilidade de documentos que s√£o usados para abertura de processos.
   - **Exemplos de frases:**
     - "Eu gostaria de verificar a legibilidade de um documento."
     - "Voc√™ pode me ajudar a verificar se meu documento est√° leg√≠vel?"

### 7. **FallbackIntent**
   - **Descri√ß√£o:** Acionada quando o bot n√£o compreende a solicita√ß√£o do usu√°rio.

## üöÄ Execu√ß√£o e utiliza√ß√£o

### Pr√©-requisitos
- **Conta AWS**
- **NodeJS >=20**
- **AWS CLI V2**

### Passos de inicializa√ß√£o da API com o Serverless

1. Clone o reposit√≥rio: `git clone https://github.com/YtalloPereira/ACBot`.
2. Navegue at√© o diret√≥rio do projeto: `cd sprints-9-10-pb-aws-maio`.
3. Instale o serverless: `npm install -g serverless`.
4. V√° para a pasta `api/`.
5. Adicione as vari√°veis de ambiente criando um arquivo `.env` na pasta `api/` seguindo o modelo do arquivo **[.env.example](/api/.env.example)**.
6. Configure a AWS CLI com credenciais ou via SSO, e com profile default ou outro definido.
   - Se a configura√ß√£o foi feita definindo um **profile**, adicione a vari√°vel `PROFILE_NAME` assim como sugerido no exemplo de env do passo anterior.
7. Rode o comando `serverless` e logue na sua conta
8. Utilize o comando `serverless deploy` e verifique o funcionamento da API com os endpoints retornados no terminal, o retorno ser√° parecido com isso:

```bash
Deploying "academic-soon" to stage "dev" (us-east-1)

‚úî Service deployed to stack academic-soon-dev (30s)

endpoints:
  GET - https://xxxxxxxxxx.execute-api.us-east-1.amazonaws.com/
  GET - https://xxxxxxxxxx.execute-api.us-east-1.amazonaws.com/v1
  POST - https://xxxxxxxxxx.execute-api.us-east-1.amazonaws.com/v1/images/make-upload
  POST - https://xxxxxxxxxx.execute-api.us-east-1.amazonaws.com/v1/audios/make-upload
functions:
  health: academic-soon-dev-health (3.3 kB)
  v1Description: academic-soon-dev-v1Description (3.3 kB)
  uploadImage: academic-soon-dev-uploadImage (3.3 kB)
  uploadAudio: academic-soon-dev-uploadAudio (3.3 kB)
```

### Passos para executar o chatbot no Lex e o backend no Lambda

1. Ap√≥s executar os passos acima, acesse v√° para o diret√≥rio do **[bot.zip](/assets/bot/bot.zip)**.
2. Abra o seu console da AWS, busque pelo servi√ßo Lex, importe este arquivo zip do bot e execute o build.
3. Busque pelo servi√ßo Lambda no console da AWS, crie uma nova fun√ß√£o lambda para o **Node.js 20.x** e arquitetura **x86_64**.
4. Compacte o diret√≥rio da fun√ß√£o **[lambda](./server/lambda)** e importe o arquivo zip nessa fun√ß√£o lambda criada no passo anterior.
5. Volte para o bot do Lex, abra o chat, v√° na engrenagem(‚öôÔ∏è) e selecione a fun√ß√£o lambda importada.


### Passos para popularizar as tabelas com as informa√ß√µes que o bot precisa

1. Ap√≥s os passos acima, acesse a pasta `server/` e instale todos os pacotes do projeto com o `npm install`.
2. Adicione as vari√°veis de ambiente criando um arquivo `.env` na pasta `server/` seguindo o modelo do arquivo **[.env.example](/server/.env.example)** assim como os passos da parte da **api**, lembrando de utilizar a mesma vari√°vel para o `RESOURCE_PREFIX` das var√°iveis da **api**.
3. Execute o script de populariza√ß√£o de tabelas: `npm run db:seed`.
4. Execute o script de populariza√ß√£o do s3: `npm run s3:storage`.

### Passos para implantar o frontend no Amplify

1. Ap√≥s os passos acima, no console AWS, busque pelo servi√ßo AWS Amplify
2. Ao acessar o servi√ßo, conecte o reposit√≥rio do github ao Amplify, selecione a pasta `web/` desse projeto, insira as vari√°veis de ambiente seguindo o modelo do **[.env.example](/web/.env.example)** e fa√ßa o deploy da aplica√ß√£o.
3. Acesse o endpoint da aplica√ß√£o que foi gerado.

#### Ap√≥s todos esses passos acima, a aplica√ß√£o estar√° pronta para se utilizar integrada aos servi√ßos da AWS

## üß± Estrutura do projeto


```
‚îú‚îÄ‚îÄ api
‚îÇ   ‚îú‚îÄ‚îÄ controllers
‚îÇ   ‚îú‚îÄ‚îÄ lib
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ .env.example
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ serverless.yml
‚îú‚îÄ‚îÄ assets
‚îú‚îÄ‚îÄ bot
‚îú‚îÄ‚îÄ server
‚îÇ   ‚îú‚îÄ‚îÄ database
‚îÇ   ‚îú‚îÄ‚îÄ lambda
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ node_modules
‚îÇ   ‚îú‚îÄ‚îÄ .env.example
‚îÇ   ‚îú‚îÄ‚îÄ package-lock.json
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ server.js
‚îú‚îÄ‚îÄ web
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ README.md
```

### Descri√ß√£o das principais pastas

- **`api/`**: Controladores das rotas e configura√ß√£o do Serverless para o deploy de fun√ß√µes Lambda.
- **`assets/`**: Armazena recursos est√°ticos.
- **`server/`**: Cont√©m a l√≥gica do backend, incluindo fun√ß√µes Lambda e scripts de manipula√ß√£o de banco de dados.
- **`database/`**: Cont√©m dados em JSON e scripts de migra√ß√£o/seeder para o DynamoDB.
- **`lambda/`**: Fun√ß√µes Lambda que processam as requisi√ß√µes do bot e realizam a integra√ß√£o com os servi√ßos da AWS.
- **`utils/`**: Fun√ß√µes utilit√°rias que suportam o projeto, como a gera√ß√£o de √°udio e consulta de dados.
- **`web/`**: Diret√≥rio reservado para a aplica√ß√£o web (frontend e backend).
- **`.env.example`**: Exemplo de configura√ß√£o de vari√°veis de ambiente.
- **`.gitignore`**: Arquivo que especifica quais arquivos ou pastas devem ser ignorados pelo Git.
- **`README.md`**: Arquivo de documenta√ß√£o principal do projeto.


## üöß Desafios e Solu√ß√µes

### 1. Primeiro Contato com a SDK do JS
- **Desafio:** A equipe optou por usar java script no projeto, mas alguns membros n√£o estavam familiarizados com a nova SDK uma vez que ao longo das sprint praticamente usamos apenas python
- **Solu√ß√£o:** Revis√£o na documenta√ß√£o da SDK disponibilizada pela AWS 

### 2. Utiliza√ß√£o dos Recursos do Lex
- **Desafio:** Ap√≥s as primeiras implementa√ß√µes das intents percebemos que pod√≠amos melhorar 
- **Solu√ß√£o:** Revis√£o do c√≥digo das intents delegando quando necess√°rio, responsabilidades ao pr√≥prio lex ao inv√©s de fazer tudo via c√≥digo 

## üåê Acesso ao Chatbot

O ACBot est√° dispon√≠vel em: [https://main.ded9i8rzd9kck.amplifyapp.com](https://main.ded9i8rzd9kck.amplifyapp.com)

## üë• Contribuidores

| [<img loading="lazy" src="https://avatars.githubusercontent.com/u/92949630?v=4" width=115><br><sub>Geraldo Mendes</sub>](https://github.com/Geraldomendes) | [<img loading="lazy" src="https://avatars.githubusercontent.com/u/91287544?v=4" width=115><br><sub>Jo√£o Emmanuel</sub>](https://github.com/KBSSA1) | [<img loading="lazy" src="https://avatars.githubusercontent.com/u/43382153?v=4" width=115><br><sub>Richard Freitas</sub>](https://github.com/wesleyfreit) | [<img loading="lazy" src="https://avatars.githubusercontent.com/u/113937488?v=4" width=115><br><sub>Ytallo Pereira</sub>](https://github.com/YtalloPereira) 
| :---: | :---: | :---: | :---: |

***